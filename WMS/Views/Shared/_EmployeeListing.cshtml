@model IEnumerable<Ganedata.Core.Models.EmployeesViewModel>

@{
    ViewBag.Title = "Employees";
    ViewBag.SectionTitle = "Employees";
}
<h2><span>Employee List</span></h2>
<div class="pull-right">
    <p>
        <input class="form-control" name="searchInput" id="searchInput_Employee" placeholder="Search Employee" type="text">
        <a class="btn btn-primary btn-outline-success" id="searchBtn_Employee" href="#">Search</a>
        <a class="btn btn-primary btn-outline-success alert-info pull-right" href="/employees/add">Add Employee</a>
    </p>
</div>
<div class="table-responsive col-sm-10">
    @if (ViewBag.Message != null)
            {
            <div class="alert-success col-sm-12">
                @ViewBag.Message
            </div>
    }
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Id</th>
                <th>Employee</th>
                <th>Address</th>
                <th>Contact Number</th>
                <th>TenantLocations</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @{ int x = 1;}
            @foreach (var item in Model)
            {
                <tr id="row_@item.Id">
                    <th scope="row">@item.Id</th>
                    <td>
                        @String.Format("{0} {1}", item.FirstName, item.SurName)
                    </td>
                    <td>@item.FullAddress()</td>
                    <td>
                        @if (!String.IsNullOrWhiteSpace(item.ContactNumbers.HomeNumber))
                        {
                            <p>Home: @item.ContactNumbers.HomeNumber</p>
                        }
                        @if (!String.IsNullOrWhiteSpace(item.ContactNumbers.WorkNumber))
                        {
                            <p>Work: @item.ContactNumbers.WorkNumber</p>
                        }
                        @if (!String.IsNullOrWhiteSpace(item.ContactNumbers.MobileNumber))
                        {
                            <p>Mobile: @item.ContactNumbers.MobileNumber</p>
                        }
                        @if (!String.IsNullOrWhiteSpace(item.ContactNumbers.EmailAddress))
                        {
                            <p>Email: @item.ContactNumbers.EmailAddress</p>
                        }
                    </td>
                    <td>
                        @foreach (var itemEmmployee in item.EmployeeShifts_Stores)
                        {
                            if (itemEmmployee.TenantLocations != null)
                            {
                            <p>@itemEmmployee.TenantLocations.WarehouseName</p>
                                }
                            }
                    </td>
                    <td>
                        <form class="form-horizontal" id="_deleteForm">
                            @Html.AntiForgeryToken()
                            <a class="btn btn-primary alert-warning" href="/employees/EmployeeDetails/@item.Id" role="button">Edit</a>
                            <a class="btn btn-primary alert-danger" role="button" data-valueid="@item.Id" data-controller="Employees" id="deleteBtn" data-title="Delete Employee"
                               data-message="This cannot be reversed, are you sure you want to delete this Employee?" data-toggle="modal" data-target="#confirm-delete">Delete</a>
                            <a class="btn btn-primary alert-link" href="/shifts/index/@item.Id" role="button">Shifts</a>
                        </form>
                    </td>
                </tr>
                x += 1;
            }
        </tbody>
    </table>
</div>
